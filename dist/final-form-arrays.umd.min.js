!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["final-form-arrays"]={})}(this,function(e){"use strict";function l(){return(l=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function v(e,n,r,t){void 0===t&&(t=e),e.fields[r]=l({},n,{name:r,change:t.fields[r]&&t.fields[r].change,blur:t.fields[r]&&t.fields[r].blur,focus:t.fields[r]&&t.fields[r].focus,lastFieldState:void 0})}function f(e,i,n){var f=e[0],c=e[1],r=e[2],t=n.changeValue,a=n.resetFieldState;t(i,f,function(e){var n=[].concat(e||[]);return n.splice(c,0,r),n});var u=new RegExp("^"+f+"\\[(\\d+)\\](.*)"),o=l({},i.fields);Object.keys(i.fields).forEach(function(e){var n=u.exec(e);if(n){var r=Number(n[1]);if(c<=r){var t=f+"["+(r+1)+"]"+n[2];v(i,o[e],t)}r===c&&a(e)}})}function i(e,i,n){var r,f=e[0],c=e[1],t=n.changeValue,a=n.renameField;t(i,f,function(e){var n=[].concat(e||[]);return r=n[c],n.splice(c,1),n});var u=new RegExp("^"+f+"\\[(\\d+)\\](.*)"),o=l({},i,{fields:l({},i.fields)});return Object.keys(i.fields).forEach(function(e){var n=u.exec(e);if(n){var r=Number(n[1]);if(r===c)delete i.fields[e];else if(c<r){delete i.fields[e];var t=f+"["+(r-1)+"]"+n[2];o.fields[t]?v(i,o.fields[e],t,o):a(i,e,t)}}}),r}var n={insert:f,concat:function(e,n,r){var t=e[0],i=e[1];(0,r.changeValue)(n,t,function(e){return e?[].concat(e,i):i})},move:function(e,u,n){var o=e[0],s=e[1],l=e[2],r=n.changeValue;if(s!==l){r(u,o,function(e){var n=[].concat(e||[]),r=n[s];return n.splice(s,1),n.splice(l,0,r),n});var d=o+"["+s+"]";Object.keys(u.fields).forEach(function(e){if(e.substring(0,d.length)===d){var n=e.substring(d.length),r=d+n,t=u.fields[r];if(s<l)for(var i=s;i<l;i++){var f=o+"["+i+"]"+n;v(u,u.fields[o+"["+(i+1)+"]"+n],f)}else for(var c=s;l<c;c--){var a=o+"["+c+"]"+n;v(u,u.fields[o+"["+(c-1)+"]"+n],a)}v(u,t,o+"["+l+"]"+n)}})}},pop:function(e,n,r){var t,i,f=e[0];if((0,r.changeValue)(n,f,function(e){if(e)return e.length?(i=e.length-1,t=e[i],e.slice(0,i)):[]}),void 0!==i){var c=new RegExp("^"+f+"\\["+i+"].*");Object.keys(n.fields).forEach(function(e){c.test(e)&&delete n.fields[e]})}return t},push:function(e,n,r){var t=e[0],i=e[1];(0,r.changeValue)(n,t,function(e){return e?[].concat(e,[i]):[i]})},remove:i,removeBatch:function(e,i,n){var f=e[0],c=e[1],r=n.changeValue,a=[].concat(c);a.sort();for(var t=0;t<a.length;t++)0<t&&a[t]===a[t-1]&&a.splice(t--,1);var u=[];r(i,f,function(n){if(u=c.map(function(e){return n&&n[e]}),!n||!a.length)return n;var r=[].concat(n),t=[];return a.forEach(function(e){r.splice(e-t.length,1),t.push(n&&n[e])}),r});var o=new RegExp("^"+f+"\\[(\\d+)\\](.*)"),s=l({},i,{fields:{}});return Object.keys(i.fields).forEach(function(e){var n=o.exec(e);if(n){var r=Number(n[1]);if(!~a.indexOf(r)){var t=f+"["+(r-function(e,r){return e.reduce(function(e,n){return n<r?e+1:e},0)}(a,r))+"]"+n[2];v(s,i.fields[e],t,i)}}else s.fields[e]=i.fields[e]}),i.fields=s.fields,u},shift:function(e,n,r){var t=e[0];return i([t,0],n,r)},swap:function(e,f,n){var r=e[0],t=e[1],i=e[2],c=n.changeValue;if(t!==i){c(f,r,function(e){var n=[].concat(e||[]),r=n[t];return n[t]=n[i],n[i]=r,n});var a=r+"["+t+"]",u=r+"["+i+"]";Object.keys(f.fields).forEach(function(e){if(e.substring(0,a.length)===a){var n=e.substring(a.length),r=a+n,t=u+n,i=f.fields[r];v(f,f.fields[t],r),v(f,i,t)}})}},unshift:function(e,n,r){var t=e[0],i=e[1];return f([t,0,i],n,r)},update:function(e,n,r){var t=e[0],i=e[1],f=e[2];(0,r.changeValue)(n,t,function(e){var n=[].concat(e||[]);return n.splice(i,1,f),n})}};e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-arrays.umd.min.js.map
